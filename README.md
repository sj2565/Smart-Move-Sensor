# μ΄λ™ν• ν™κ²½ λ° μ¶©κ²© κ°μ§€ μ‹μ¤ν…

## 1. ν”„λ΅μ νΈ μ†κ°
μ΄λ™ν• ν™κ²½ λ° μ¶©κ²© κ°μ§€ μ‹μ¤ν…μ€ STM32 κΈ°λ°μ IoT μ„Όμ„ μ‹μ¤ν…μ„ ν™μ©ν•μ—¬ μ΄λ™ μ¤‘ λ°μƒν•  μ μλ” ν™κ²½ μ •λ³΄ μμ§‘κ³Ό μ¶©κ²©(ν¬νΈν™€) κ°μ§€λ¥Ό μν–‰ν•κ³ , μ΄λ¥Ό μ‹¤μ‹κ°„μΌλ΅ μ„μΉμ™€ ν•¨κ» μ‹κ°ν™”ν•λ” μ‹μ¤ν…. <br>
κ°€μ†λ„ μ„Όμ„λ¥Ό μ΄μ©ν•΄ μ¶©κ²© μ΄λ²¤νΈλ¥Ό κ°μ§€ν•κ³ , μ¨μµλ„/κ³µκΈ°μ§ μ„Όμ„λ¥Ό ν†µν•΄ μ‹¤μ™Έ ν™κ²½ μƒνƒλ¥Ό μΈ΅μ •ν•λ©° GPS λ¨λ“μ„ ν†µν•΄ μ„μΉ λ°μ΄ν„°λ¥Ό μμ§‘. <br>
μ„Όμ„μ™€ λ¨λ“λ“¤μ„ μ μ–΄ν•κΈ° μ„ν•΄ μΈν„°λ½νΈ, GPIO, ADC, PWM λ“± λ‹¤μ–‘ν• μ„λ² λ””λ“ μ μ–΄ κΈ°μ  ν™μ©. <br>
μμ§‘λ λ°μ΄ν„°λ” ESP32λ¥Ό ν†µν•΄ MQTTλ΅ μ „μ†΅λλ©°, λΈλΌμ°μ € κΈ°λ° Google Maps μ‹κ°ν™” νμ΄μ§€μ—μ„ μ‹¤μ‹κ°„μΌλ΅ ν™•μΈ κ°€λ¥. <br>
ν„μ¬λ” Wi-Fi κΈ°λ°μΌλ΅ μ‘λ™ν•λ©°, ν–¥ν›„ λ°°ν„°λ¦¬ μ „μ› λ° μ €μ „λ ¥ κµ¬μ΅°λ¥Ό λ„μ…ν•μ—¬ μ•Όμ™Έ μ΄λ™ν• μ¥λΉ„λ΅μ ν™•μ¥ κ°€λ¥μ„±μ„ κ³ λ ¤ μ¤‘. <br>
ν•΄λ‹Ή μ‹μ¤ν…μ€ λ„λ΅ μ„ μ„ν— μ”μ†(μ: ν¬νΈν™€)μ μ„μΉ νμ•… λ° ν™κ²½ μƒνƒ λ¶„μ„μ— ν™μ© κ°€λ¥. <br>

## 2. ν”„λ΅μ νΈ μ΄λ―Έμ§€
<img width="450" alt="μ‘ν’μ‚¬μ§„" src="https://github.com/user-attachments/assets/cb320aaf-70e7-4cd5-95c1-a1dc190236f9">

## 3. ν”„λ΅μ νΈ νλ΅λ„
<img width="850" alt="νλ΅λ„" src="https://github.com/user-attachments/assets/3ae1a685-1812-4e40-8ec8-9c6f7cd46ecb" />

## 4. ν™μ©λ κΈ°μ 

### β™ μ„λ² λ””λ“ μ‹μ¤ν…
- **STM32 Black Pill (STM32F411CEU6)** (μ„Όμ„ μμ§‘ λ° μ‹¤μ‹κ°„ μ μ–΄ (FreeRTOS κΈ°λ°))
- **MPU6050** (μΈν„°λ½νΈ λ° I2C κΈ°λ° 6μ¶• μμ΄λ΅/κ°€μ†λ„ μ„Όμ„ (μ¶©κ²© κ°μ§€ λ° μ΄λ™ ν‰κ·  ν•„ν„° μ μ©))
- **DHT22** (GPIO κΈ°λ° μ¨μµλ„ μ„Όμ„ (Bit-banging λ°©μ‹ + DWT λ”λ μ΄ μ‚¬μ©))
- **MQ135** (ADC κΈ°λ° κ³µκΈ°μ§ μ„Όμ„ (0~1023 β†’ PPM κ³„μ‚°))
- **NEO-6M GPS** (UART κΈ°λ° μ„μΉ μμ‹ , GNGGA νμ‹±, Fix μƒνƒ νλ‹¨)
- **RGB LED**  (PWM κΈ°λ° μƒ‰μƒ μ μ–΄ (κ³µκΈ°μ§μ— λ”°λ¥Έ μƒ‰μƒ λ°μ‘))
- **Push Button** (μΈν„°λ½νΈ κΈ°λ° RGB μ„Όμ„ on/off μ μ–΄)

### π§© RTOS & μ‹μ¤ν… μ μ–΄
- **FreeRTOS** (CMSIS-RTOS v1 κΈ°λ° Task/Semaphore/Queueκµ¬μ΅°)
- **Task κµ¬μ„±** (SensorTask, GpsTask, CommTask, ButtonTask)
- **Semaphore** (λ²„νΌ μ΄λ²¤νΈ μ μ–΄ (λ””λ°”μ΄μ‹± μ²λ¦¬ ν¬ν•¨))
- **Queue** (κµ¬μ΅°μ²΄ κΈ°λ° μ„Όμ„ λ°μ΄ν„° μ „λ‹¬ (Task κ°„ ν†µμ‹ ))
  
### π“΅ ν†µμ‹ 
- **UART** (STM32 β†” GPS (UART1), STM32 β†” ESP32 (UART6, JSON μ „μ†΅))
- **I2C** (MPU6050 μ μ–΄ λ° μ¶©κ²© κ°μ§€ μΈν„°λ½νΈ μ„¤μ •)
- **Wi-Fi** (MQTT λ°μ΄ν„° μ „μ†΅)

### π λ””λ²„κΉ…
- **CP2102** (__write μ¤λ²„λΌμ΄λ“ UART λ””λ²„κΉ… (STM32 β†” PC Serial Monitor))
- **TeraTerm** (κ°μΆ… μ„Όμ„ λ°μ΄ν„° μμ‹  λ° JSON μ „μ†΅ λ΅κ·Έ ν™•μΈ)

### π’» λ„¤νΈμ›ν¬ / μ‹κ°ν™”
- **ESP32-WROOM-32** (Wi-Fi κΈ°λ° MQTT μ „μ†΅)
- **MQTT(Mosquitto)** (JSON ν¬λ§· μ‹¤μ‹κ°„ μ„Όμ„ μ „μ†΅)
- **Google Maps API(HTML/JS κΈ°λ°)** (μ‹¤μ‹κ°„ μ„μΉ κΈ°λ° μ„Όμ„ μ‹κ°ν™” + μ¶©κ²© μ•λ¦Ό λ§μ»¤ + ννΈλ§µ λ μ΄μ–΄)

### π›  IDE
- **STM32CubeIDE**
- **Visual Studio Code**
- **ArduinoIDE**

## 5. ν”„λ΅μ νΈ μ‹¤ν–‰ μ΄λ―Έμ§€
<img width="790" alt="λ°μ΄ν„°" src="https://github.com/user-attachments/assets/416b198a-5735-48fd-88cd-596cd45eb9ed" /> <br>μ‹¤μ‹κ°„ μ„Όμ„ λ°μ΄ν„° MQTT μ†΅μμ‹  (STM32 -> ESP32) <br><br><br><br>

<img width="330" alt="κµ¬κΈ€λ§µ μ§€λ„" src="https://github.com/user-attachments/assets/6d567f0f-5ea6-4b56-a1be-ba38a0a08b3b" /> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&nbsp;&nbsp; 
<img width="330" alt="κ³µκΈ°μ§ λ‚μ¨" src="https://github.com/user-attachments/assets/565ed62f-3459-4d73-91d8-9bc762672253" /> <br> μ„Όμ„ λ°μ΄ν„° κµ¬κΈ€λ§µ μ‹κ°ν™” λ° μ„μΉ ν™•μΈ &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; κ³µκΈ°μ§μ— λ”°λ¥Έ ν•€ μƒ‰μƒ λ³€κ²½ (λΉ¨κ°•, λ…Έλ‘ ,μ΄λ΅)<br><br><br><br><br><br>
<img width="330" alt="μ¶©κ²© κ°μ§€ 2" src="https://github.com/user-attachments/assets/88ee9eed-28f0-448e-8d3f-c78d477be70b" /> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&nbsp;&nbsp;
<img width="330" alt="ν¬νΈν™€ κ°μ§€ ννΈλ§µ2" src="https://github.com/user-attachments/assets/457a4daf-6916-4616-8d28-4564768a1bd3" /> <br> ν¬νΈν™€ μ¶©κ²©μΌλ΅ μΈν• μ•λ¦Ό μλ™ ν‘μ‹ &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; ν¬νΈν™€ κ°μ§€ λΉλ„μ— λ”°λ¥Έ ννΈλ§µ μ‹κ°ν™” <br><br><br>

## 6. μ„¤μΉ λ° μ‹¤ν–‰
**νμ›¨μ–΄ ν”λμ‹± (STM32)**
```bash
# STM32CubeIDEμ—μ„ μ „μ²΄ ν”„λ΅μ νΈ λΉλ“ ν›„, λ³΄λ“μ— μ—…λ΅λ“
# ν•„μ”μ‹ ST-Link μ‚¬μ©

# μ£Όμ” μ„Όμ„ λ° λ¨λ“
- MPU6050 (I2C)
- DHT22 (GPIO)
- MQ135 (ADC)
- GPS (UART)
```
**ESP32 νμ›¨μ–΄ μ—…λ΅λ“**
```bash
# PlatformIO / Arduino IDEλ¥Ό μ‚¬μ©ν•μ—¬ μ—…λ΅λ“
# μ„¤μ •: buad rate : 115200 / ESP32-WROOM-32

# μ£Όμ” κΈ°λ¥
- STM32μ—μ„ UARTλ΅ μμ‹ ν• JSON λ°μ΄ν„° MQTTλ΅ μ†΅μ‹ 
- Wi-Fi μ—°κ²° λ° MQTT λΈλ΅μ»¤ μ—°λ™
```

**MQTT λΈλ΅μ»¤ μ„¤μΉ (μ„ νƒ)**
```bash
# λ΅μ»¬ MQTT λΈλ΅μ»¤ μ‹¤ν–‰ (Mosquitto λ“±)
sudo apt install mosquitto
mosquitto

# λλ” public MQTT broker μ‚¬μ© κ°€λ¥
```

**μ „μ²΄ μ‹¤ν–‰ μμ„ μ”μ•½**
```text
1. STM32 λ³΄λ“ μ „μ› ON (μ„Όμ„ β†’ ESP32λ΅ UART μ†΅μ‹ )
2. ESP32 Wi-Fi μ—°κ²° λ° MQTT λ©”μ‹μ§€ λ°ν–‰
3. μ›Ή ν΄λΌμ΄μ–ΈνΈ(mqtt.html)μ—μ„ WebSocketμΌλ΅ λΈλ΅μ»¤μ— μ—°κ²°
4. λΈλΌμ°μ €μ—μ„ μ‹¤μ‹κ°„ μƒνƒ ν™•μΈ
```

## 7. ν–¥ν›„ κ°μ„ ν•  μ 
+ μμ§‘λ μ„Όμ„ λ°μ΄ν„°λ¥Ό κΈ°λ°μΌλ΅ μ΄λ™ ν¨ν„΄ λ¶„μ„ λ° ν¬νΈν™€ μ„ν—λ„ μμΈ΅ λ“± μ§€λ¥ν• νλ‹¨μ΄ κ°€λ¥ν• AIλ¨λΈ λ„μ….
+ μ™Έλ¶€μ—μ„λ„ μ•μ •μ μΌλ΅ λ™μ‘ν•  μ μλ„λ΅ λ¦¬ν¬ λ°°ν„°λ¦¬ + μ¶©μ „ λ¨λ“(TP4056 λ“±)μ„ λ„μ…ν•μ—¬ ν΄λ€μ„±κ³Ό μ‹¤μ©μ„± μ¦μ§„.
+ μ‹μ¤ν… μ „μ²΄λ¥Ό μ €μ „λ ¥ κΈ°λ°μΌλ΅ μ„¤κ³„ν•μ—¬, λ€κΈ° μ¤‘μ—λ” Sleep λ¨λ“λ΅ μ§„μ…ν•κ³  μ΄λ²¤νΈ λ°μƒ μ‹μ—λ§ μΈν„°λ½νΈλ¥Ό ν†µν•΄ ν™μ„±ν™”λλ” κµ¬μ΅° κµ¬ν„.
-------------------------------------------------------------------------------------
κ³ λ ¤ν•΄ λ³Ό λ§ν• μ‚¬ν•­
+ μ΄λ™ν‰κ· ν•„ν„° μ™Έμ— λ‹¤μ–‘ν• DSP(λ””μ§€ν„Έ μ‹ νΈ μ²λ¦¬) μ μ©.
+ λ‹¨μν• HTMLμ΄ μ•„λ‹ μ„λ²„μ™€ λ°μ΄ν„°λ² μ΄μ¤ ν™μ©.
